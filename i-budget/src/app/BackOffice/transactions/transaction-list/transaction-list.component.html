<div class="transaction-list-container">
  <div class="header-section">
    <h3>Transaction Board</h3>
    <div class="search-container">
      <input
        type="text"
        placeholder="Search transactions..."
        (input)="onSearch($any($event.target).value)"
        class="search-input"
      >
      <i class="search-icon">🔍</i>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading transactions...</p>
  </div>

  <div *ngIf="!isLoading && filteredTransactions.length === 0" class="no-data">
    <i class="empty-icon">📭</i>
    <p>No transactions found.</p>
  </div>

  <div class="board-container" *ngIf="!isLoading && filteredTransactions.length > 0">
    <div class="board-columns">
      <!-- Completed Transactions Column -->
      <div class="board-column completed-column">
        <div class="column-header">
          <h4>Completed</h4>
          <span class="transaction-count">{{completedTransactions.length}}</span>
        </div>
        <div
          class="column-content"
          cdkDropList
          #completedList="cdkDropList"
          [cdkDropListData]="completedTransactions"
          [cdkDropListConnectedTo]="[pendingList]"
          (cdkDropListDropped)="drop($event)"
        >
          <div
            class="transaction-card"
            *ngFor="let transaction of completedTransactions"
            cdkDrag
            [cdkDragData]="transaction"
          >
            <div class="card-header">
              <span class="transaction-id">#{{transaction.idTransaction}}</span>
<span class="badge" [ngClass]="'type-' + (transaction.transactionType.toLowerCase() || 'unknown')">
  {{transaction.transactionType || 'Unknown'}}
</span>
            </div>
            <div class="card-body">
              <div class="amount">{{transaction.amount | currency}}</div>
              <div class="reference">Ref: {{transaction.refNum}}</div>
              <div class="date">{{transaction.transactionDate | date:'medium'}}</div>
            </div>
            <div class="card-actions">
              <button class="btn-view" (click)="viewDetails(transaction)" title="View Details">
                <i class="btn-icon">👁️</i>
              </button>
              <button class="btn-edit" (click)="editTransaction(transaction)" title="Edit Transaction">
                <i class="btn-icon">✏️</i>
              </button>
              <button class="btn-delete" (click)="deleteTransaction(transaction)" title="Delete Transaction">
                <i class="btn-icon">🗑️</i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Pending Transactions Column -->
      <div class="board-column pending-column">
        <div class="column-header">
          <h4>Pending</h4>
          <span class="transaction-count">{{pendingTransactions.length}}</span>
        </div>
        <div
          class="column-content"
          cdkDropList
          #pendingList="cdkDropList"
          [cdkDropListData]="pendingTransactions"
          [cdkDropListConnectedTo]="[completedList]"
          (cdkDropListDropped)="drop($event)"
        >
          <div
            class="transaction-card"
            *ngFor="let transaction of pendingTransactions"
            cdkDrag
            [cdkDragData]="transaction"
          >
            <div class="card-header">
              <span class="transaction-id">#{{transaction.idTransaction}}</span>
              <!-- Fix the transaction type badge -->
              <span class="badge" [ngClass]="'type-' + (transaction.transactionType ? transaction.transactionType.toLowerCase() : 'unknown')">
                {{transaction.transactionType || 'Unknown'}}
              </span>
            </div>
            <div class="card-body">
              <div class="amount">{{transaction.amount | currency}}</div>
              <div class="reference">Ref: {{transaction.refNum}}</div>
              <div class="date">{{transaction.transactionDate | date:'medium'}}</div>
            </div>
            <div class="card-actions">
              <button class="btn-view" (click)="viewDetails(transaction)" title="View Details">
                <i class="btn-icon">👁️</i>
              </button>
              <button class="btn-edit" (click)="editTransaction(transaction)" title="Edit Transaction">
                <i class="btn-icon">✏️</i>
              </button>
              <button class="btn-delete" (click)="deleteTransaction(transaction)" title="Delete Transaction">
                <i class="btn-icon">🗑️</i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
