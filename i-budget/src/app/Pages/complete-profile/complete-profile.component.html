<div class="containar">
  <div class="wrapper">
    <h1>Complete Your Profile</h1>
    <p>Please fill in your information</p>
    
    <form #registerForm="ngForm" (ngSubmit)="completeProfile()">
      <input type="text" class="curved-input" placeholder="First Name" name="firstName" [(ngModel)]="registerRequest.firstName" required>
      <div *ngIf="registerForm.submitted && !registerRequest.firstName" class="validation-message">
        <b>Firstname is mandatory</b>
      </div>
    
      <input type="text" class="curved-input" name="lastName" [(ngModel)]="registerRequest.lastName" required placeholder="Last Name">
      <div *ngIf="registerForm.submitted && !registerRequest.lastName" class="validation-message">
        <b>Lastname is mandatory</b>
      </div>
    
      <div class="password-container">
        <input  [type]="showPassword ? 'text' : 'password'" 
         class="curved-input" 
         name="password"
          [(ngModel)]="registerRequest.password"
           required minlength="10" placeholder="Password">
        <span class="toggle-password" (click)="togglePasswordVisibility()">
          <i class="fas" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>

        </span>
      </div>
      <div class="password-strength" *ngIf="registerRequest.password">
        <div class="password-strength-bar" [ngClass]="getPasswordStrengthClass()"></div>
      </div>
      <div *ngIf="registerForm.submitted && registerRequest.password && registerRequest.password.length < 10" class="validation-message">
        <b>Password should be at least 10 characters long</b>
      </div>
      <select name="gender" [(ngModel)]="registerRequest.gender" required class="curved-input">
        <option value="" disabled selected>Gender</option>
        <option value="MALE">Male</option>
        <option value="FEMALE">Female</option>
      </select>
      <div *ngIf="registerForm.submitted && !registerRequest.gender" class="validation-message">
        <b>Gender is mandatory</b>
      </div>
    
      <select name="aiTonePreference" [(ngModel)]="registerRequest.aiTonePreference" required class="curved-input">
        <option value="" disabled selected>AI Tone Preference</option>
        <option value="FORMAL">Formal</option>
        <option value="INFORMAL">Informal</option>
        <option value="FRIENDLY">Friendly</option>
      </select>
      <div *ngIf="registerForm.submitted && !registerRequest.aiTonePreference" class="validation-message">
        <b>AI Tone Preference is mandatory</b>
      </div>
    
      <div class="knowledge-level-title">
        Financial Knowledge Level
      </div>
      <div class="knowledge-level-container">
        <div class="knowledge-option knowledge-beginner">
          <input type="radio" id="beginner" name="financialKnowledgeLevel" [value]="'BEGINNER'" [(ngModel)]="registerRequest.financialKnowledgeLevel" required>
          <label for="beginner">Beginner</label>
        </div>
        <div class="knowledge-option knowledge-intermediate">
          <input type="radio" id="intermediate" name="financialKnowledgeLevel" [value]="'INTERMEDIATE'" [(ngModel)]="registerRequest.financialKnowledgeLevel">
          <label for="intermediate">Intermediate</label>
        </div>
        <div class="knowledge-option knowledge-expert">
          <input type="radio" id="expert" name="financialKnowledgeLevel" [value]="'EXPERT'" [(ngModel)]="registerRequest.financialKnowledgeLevel">
          <label for="expert">Expert</label>
        </div>
      </div>
      <div *ngIf="registerForm.submitted && !registerRequest.financialKnowledgeLevel" class="validation-message">
        <b>Financial Knowledge Level is mandatory</b>
      </div>
    
      <input type="text" class="curved-input" name="profession" [(ngModel)]="registerRequest.profession" required placeholder="Profession">
      <div *ngIf="registerForm.submitted && !registerRequest.profession" class="validation-message">
        <b>Profession is mandatory</b>
      </div>
    
      <input type="date" class="curved-input" name="dateOfBirth" [(ngModel)]="registerRequest.dateOfBirth" required>
      <div *ngIf="registerForm.submitted && !registerRequest.dateOfBirth" class="validation-message">
        <b>Date of Birth is mandatory</b>
      </div>
    
      <input type="text" class="curved-input" name="phoneNumber" [(ngModel)]="registerRequest.phoneNumber" (input)="updatePhoneNumber($event)" required maxlength="12" placeholder="Phone Number">
      <div *ngIf="registerForm.submitted && !isPhoneNumberValid()" class="validation-message">
        <b>Invalid Tunisian phone number format (should be +216XXXXXXXX)</b>
      </div>
    
      <button type="submit">Complete Profile</button>
      <button type="button" class="cancel" (click)="cancel()">Cancel</button>
    </form>
  </div>
  
  <!-- Floating shapes from the CSS -->
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>
</div>