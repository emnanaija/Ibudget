<div class="app-container">
  <app-animated-background></app-animated-background>

  <button class="sidebar-toggle" [class.collapsed]="isSidebarCollapsed" (click)="toggleSidebar()">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </button>

  <app-sidebar
    [isCollapsed]="isSidebarCollapsed"
    (toggleSidebar)="toggleSidebar()"
  ></app-sidebar>

  <div class="main-content" [class.sidebar-collapsed]="isSidebarCollapsed">
    <app-header [isSidebarCollapsed]="isSidebarCollapsed"></app-header>

    <div class="subscription-horizontal-card">
      <div class="card-image-container">
        <img src="/ChatGPT Image 6 mai 2025, 16_24_33.png" alt="Subscription Illustration" class="side-image" />
      </div>

      <div class="subscription-content">
        <div class="subscription-title-container">
          <h2 class="subscription-title">
            <span class="bold">Subscription </span>
            <span class="regular">Management</span>
          </h2>
          <div class="particles-container">
            <svg class="particle particle1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="24" height="24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h1l1 2h13l1-2h1" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M5 10v10h14V10" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 10V6a3 3 0 016 0v4" />
            </svg>
            <svg class="particle particle2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="24" height="24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m8-9h1M3 12H2m15.364-6.364l.707.707M6.343 17.657l-.707.707m12.728 0l-.707.707M6.343 6.343l-.707-.707" />
              <circle cx="12" cy="12" r="3" />
            </svg>
            <svg class="particle particle3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="24" height="24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
            <svg class="particle particle4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="24" height="24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 1.343-3 3 0 1.657 1.343 3 3 3s3-1.343 3-3c0-1.657-1.343-3-3-3z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 2v2m0 16v2m8-10h2M2 12H4m15.364-6.364l1.414 1.414M6.343 17.657l-1.414 1.414m12.728 0l-1.414-1.414M6.343 6.343L4.929 4.929" />
            </svg>
            <svg class="particle particle5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" width="24" height="24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
            </svg>
          </div>
        </div>

        <!-- Loading Indicator -->
        <div *ngIf="isLoading" class="loading-overlay">
          <div class="loading-spinner"></div>
          <p>Processing your request...</p>
        </div>

        <!-- Success Message -->
        <div *ngIf="message" class="success-message">
          <span class="info-icon">✅</span> {{ message }}
        </div>

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="error-message">
          <span class="info-icon">❌</span> {{ errorMessage }}
        </div>

        <!-- Premium User Status -->
        <div *ngIf="isPremium" class="premium-status">
          <div class="premium-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="premium-svg">
              <path d="M12 1v5M5 4l2.25 3.75M19 4l-2.25 3.75M4.5 9.5 3 20h18l-1.5-10.5h-15Z" stroke="gold" fill="rgba(255, 215, 0, 0.2)" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="m9 14 2 2 4-4" stroke="gold" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="premium-message">
            <h3>Premium Member</h3>
            <p>You're enjoying all premium features and benefits!</p>
          </div>
        </div>

        <!-- Non-Premium User Status -->
        <div *ngIf="!isPremium" class="non-premium-status">
          <div class="premium-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="non-premium-svg">
              <path d="M12 1v5M5 4l2.25 3.75M19 4l-2.25 3.75M4.5 9.5 3 20h18l-1.5-10.5h-15Z" stroke="silver" fill="rgba(192, 192, 192, 0.2)" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8.5 13h7M8.5 17h7" stroke="silver" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="premium-message">
            <h3>Upgrade to Premium</h3>
            <p>Unlock exclusive features and enhance your experience!</p>
          </div>
        </div>

        <div class="actions-container">
          <!-- Activate Premium Subscription Button - Only for non-premium users -->
          <button *ngIf="!isPremium" class="primary-button" (click)="activateSubscription()" [disabled]="isLoading">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="button-icon">
              <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a1.998 1.998 0 0 1 0 2.83 1.998 1.998 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a1.998 1.998 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.26.604.852.997 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1Z" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Activate Premium
          </button>

          <!-- Cancel Premium Subscription Button - Only for premium users -->
          <button *ngIf="isPremium" class="secondary-button" (click)="cancelSubscription()" [disabled]="isLoading">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="button-icon">
              <path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="m18 9-6 6M12 9l6 6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Cancel Subscription
          </button>

          <!-- Refresh Button -->
          <button class="refresh-button" (click)="loadUserStatus()" [disabled]="isLoading" title="Refresh subscription status">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="button-icon">
              <path d="M3 2v6h6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M3 8a9 9 0 0 1 9-3 9 9 0 0 1 6 6 9 9 0 0 1-3 9 9 9 0 0 1-9 3 9 9 0 0 1-6-6" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M21 22v-6h-6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
